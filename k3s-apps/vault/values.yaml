# Vault Configuration
image:
  repository: hashicorp/vault
  tag: 1.15.0
  pullPolicy: IfNotPresent

# Service Configuration
service:
  type: LoadBalancer
  ports:
    http:
      port: 8200
      targetPort: 8200
    cluster:
      port: 8201
      targetPort: 8201

# StatefulSet Configuration
replicaCount: 1
storage:
  size: 10Gi
  className: standard
  accessMode: ReadWriteOnce

# Resource Limits
resources:
  requests:
    cpu: 250m
    memory: 256Mi
  limits:
    cpu: 500m
    memory: 512Mi

# Vault Configuration
config:
  ui: true
  listener:
    tcp:
      address: "0.0.0.0:8200"
      cluster_address: "0.0.0.0:8201"
      tls_disable: 1
  storage:
    file:
      path: "/vault/file"
  seal:
    gcpckms:
      project: "your-gcp-project"
      region: "global"
      key_ring: "vault-key-ring"
      crypto_key: "vault-unseal-key"
  api_addr: "http://$(POD_IP):8200"
  cluster_addr: "https://$(HOSTNAME).vault:8201"
  disable_mlock: true
  telemetry:
    statsd_address: "localhost:8125"

# Security Context
securityContext:
  runAsUser: 100
  runAsGroup: 1000
  runAsNonRoot: true
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: true
  capabilities:
    drop:
      - ALL

# Service Account
serviceAccount:
  create: true
  name: vault
  annotations: {}
  labels: {}

# RBAC Configuration
rbac:
  create: true
  rules:
    - apiGroups: [""]
      resources: ["pods", "services", "endpoints", "secrets"]
      verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
    - apiGroups: ["apps"]
      resources: ["statefulsets", "deployments"]
      verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
    - apiGroups: ["extensions"]
      resources: ["deployments"]
      verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]

# Initialization Job
initJob:
  enabled: true
  backoffLimit: 6
  env:
    VAULT_ADDR: "http://vault:8200"

# Auto Unseal Job
autoUnseal:
  enabled: true
  schedule: "*/30 * * * *"
  backoffLimit: 2
  env:
    VAULT_ADDR: "http://vault:8200"

# Node Selector
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity
affinity: {}

# Labels
labels: {}